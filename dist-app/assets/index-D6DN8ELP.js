(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const u of p)if(u.type==="childList")for(const n of u.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function s(p){const u={};return p.integrity&&(u.integrity=p.integrity),p.referrerPolicy&&(u.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?u.credentials="include":p.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function f(p){if(p.ep)return;p.ep=!0;const u=s(p);fetch(p.href,u)}})();function Se(e){const r=document.createElement(e);return{element:r,withClass(s){return r.className=s,this},withText(s,f){if(s&&typeof s=="object"){const p=s,u=n=>f?f(n):String(n.value);this.element.textContent=u(p.value),p.subscribe(()=>{this.element.textContent=u(p.value)})}else this.element.textContent=String(s);return this},withId(s){return r.id=s,this},appendChild(...s){return s.forEach(f=>r.appendChild(f)),this},on(s,f){return r.addEventListener(s,f),this},build(){return this.element}}}function k(e){let r=e;const s=[];let f=!1;const p=()=>{f||(f=!0,queueMicrotask(()=>{f=!1,s.forEach(n=>{try{n(r)}catch(i){console.error("Subscriber error:",i)}})}))},u={get(n,i){return i==="value"?r:i==="subscribe"?o=>(s.push(o),()=>{const C=s.indexOf(o);C>-1&&s.splice(C,1)}):n[i]},set(n,i,o){return i==="value"?(r===o||(r=o,p()),!0):(n[i]=o,!0)}};return new Proxy({value:e},u)}let Y=null;function be(e){Y=e}function S(e,r){const s=Array.isArray(e),f=s?e:[e],p=()=>s?f.map(A=>A.value):f[0]?.value;let u=p(),n=r(u,void 0);const i=n!==void 0,o=[];if(!i){f.forEach(y=>{const T=y.subscribe(()=>{const F=p();re(F,u)||(r(F,u),u=F)});o.push(T)});const A=()=>o.forEach(y=>y());return Y&&Y.add(A),A}const C=k(n);return f.forEach(A=>{const y=A.subscribe(()=>{const T=p();if(!re(T,u)){const F=r(T,u);F!==void 0&&(re(F,n)||(n=F,C.value=F)),u=T}});o.push(y)}),C.__cleanup=()=>{o.forEach(A=>A())},Y&&Y.add(C.__cleanup),C}function re(e,r){if(e===r)return!0;if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return!1;for(let p=0;p<e.length;p++)if(e[p]!==r[p])return!1;return!0}if(typeof e=="object"&&e!==null&&(typeof r=="object"&&r!==null)){const p=typeof e.nodeType=="number",u=typeof r.nodeType=="number";if(p||u)return!1;const n=Object.getPrototypeOf(e),i=Object.getPrototypeOf(r),o=n===Object.prototype||n===null,C=i===Object.prototype||i===null;if(!o||!C)return!1;const A=Object.keys(e),y=Object.keys(r);if(A.length!==y.length)return!1;for(let T=0;T<A.length;T++){const F=A[T];if(e[F]!==r[F])return!1}return!0}return!1}let se=null;function Re(e){if(!se){console.warn("onMount called outside component context");return}se.mountCallbacks.push(e)}function we(e){se=e}function oe(e){e.isMounted||(e.isMounted=!0,e.mountCallbacks.forEach(r=>{try{const s=r();typeof s=="function"&&e.cleanups.add(s)}catch(s){console.error("Error in onMount callback:",s)}}),e.mountCallbacks=[])}function Ue(e){e.cleanups.forEach(r=>{try{r()}catch(s){console.error("Error in cleanup:",s)}}),e.cleanups.clear()}function Le(){return{cleanups:new Set,mountCallbacks:[],isMounted:!1}}function Z(e){return e&&typeof e=="object"&&"value"in e&&typeof e.subscribe=="function"}const $e=/^on([A-Z].*)$/;function Ve(e){const r=$e.exec(e);if(!r)return null;const s=r[1]??" ";return s.charAt(0).toLowerCase()+s.slice(1)}function ae(e,r){if(r){if(typeof r=="string")e.setAttribute("style",r);else if(typeof r=="object")for(const s in r)e.style[s]=r[s]}}function H(e,r,s){if(s==null||s===!1){e.removeAttribute(r);return}if(s===!0){e.setAttribute(r,"");return}if(r in e)try{e[r]=s;return}catch{}e.setAttribute(r,String(s))}function Ce(e,r){const s=r.flat(1/0);for(const f of s){if(f==null||f===!1||f===!0)continue;const p=(u,n)=>{if(!(n==null||n===!1||n===!0))if(typeof n=="string"||typeof n=="number")u.parentNode?.insertBefore(document.createTextNode(String(n)),u);else if(n instanceof Node)u.parentNode?.insertBefore(n,u);else if(Array.isArray(n))for(const i of n.flat(1/0))p(u,i);else u.parentNode?.insertBefore(document.createTextNode(String(n)),u)};if(Z(f)){const u=document.createComment("ref-start"),n=document.createComment("ref-end");e.appendChild(u),e.appendChild(n);const i=o=>{let C=u.nextSibling;for(;C&&C!==n;){const A=C.nextSibling;C.remove(),C=A}p(n,o)};i(f.value),S(f,o=>i(o));continue}typeof f=="string"||typeof f=="number"?e.appendChild(document.createTextNode(String(f))):f instanceof Node?e.appendChild(f):Array.isArray(f)&&Ce(e,f)}}function a(e,r,...s){const f=r||{};if(typeof e=="function"){const i=Le();we(i),be(i.cleanups);const o=e({...f,children:s});if(we(null),be(null),o.__context=i,o.__cleanup=()=>{Ue(i)},typeof MutationObserver<"u"){const C=new MutationObserver(y=>{y.forEach(T=>{T.removedNodes.forEach(F=>{(F===o||F.contains(o))&&(o.__cleanup?.(),C.disconnect())})})}),A=()=>{o.parentElement?C.observe(o.parentElement,{childList:!0,subtree:!0}):requestAnimationFrame(A)};if(A(),o.isConnected)oe(i);else{const y=new MutationObserver(()=>{o.isConnected&&(oe(i),y.disconnect())});y.observe(document.body,{childList:!0,subtree:!0})}}else requestAnimationFrame(()=>{o.isConnected&&oe(i)});return o}const n=Se(e).element;for(const i in f){if(i==="children")continue;const o=f[i],C=Ve(i);if(C){n.addEventListener(C,o);continue}if(i==="class"||i==="className"){Z(o)?(n.className=String(o.value??""),S(o,y=>{n.className=String(y??"")})):n.className=String(o??"");continue}if(i==="style"){Z(o)?(ae(n,o.value),S(o,y=>ae(n,y))):ae(n,o);continue}if(i==="ref"&&typeof o=="function"){o(n);continue}if(["value","checked","disabled","placeholder","type","href","src","alt"].includes(i)){Z(o)?(H(n,i,o.value),S(o,y=>H(n,i,y))):H(n,i,o);continue}Z(o)?(H(n,i,o.value),S(o,y=>H(n,i,y))):H(n,i,o)}return Ce(n,s),n}function G(e){const{each:r,key:s,render:f,children:p}=e,u=f||p;if(!u)throw new Error('For component requires either "render" or "children" prop');const n=document.createComment("for-start"),i=document.createComment("for-end"),o=new Map,C=s||((T,F)=>F),A=()=>{const T=r.value||[],F=new Map,W=[];for(let V=0;V<T.length;V++){const B=T[V];if(B===void 0)continue;const D=C(B,V),J=o.get(D);if(J)F.set(D,J),W.push(J.node);else{const c=u(B,V);F.set(D,{node:c,item:B}),W.push(c)}}for(const[V,B]of o.entries())F.has(V)||B.node.remove();W.forEach(V=>i.parentNode.insertBefore(V,i)),o.clear();for(const[V,B]of F.entries())o.set(V,B)},y=document.createElement("span");return y.style.display="contents",y.appendChild(n),y.appendChild(i),A(),S(r,A),y}function je(e){const{todo:r,editing:s,onToggle:f,onDelete:p,onStartEdit:u,onSave:n,onCancel:i}=e,o=k("");S(s,y=>{y&&(o.value=r.text.value)});const C=S(r.done,y=>y?"line-through text-gray-500":"text-gray-900"),A=y=>{y.key==="Enter"?n(o.value.trim()):y.key==="Escape"&&i()};return a("li",{class:"flex items-center gap-2 py-1"},a("input",{type:"checkbox",checked:r.done,onChange:f,class:"size-4 accent-blue-600"}),S(s,y=>y?a("input",{type:"text",value:o,onInput:T=>o.value=T.target.value,onKeyDown:A,onBlur:()=>n(o.value.trim()),class:"flex-1 px-2 py-1 border rounded outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Edit todo",autofocus:!0}):a("span",{class:C},r.text)),S(s,y=>y?a("button",{onClick:()=>n(o.value.trim()),class:"ml-auto px-2 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700"},"Save"):a("div",{class:"ml-auto flex items-center gap-2"},a("button",{onClick:u,class:"px-2 py-1 text-sm border rounded hover:bg-gray-100"},"Edit"),a("button",{onClick:p,class:"px-2 py-1 text-sm text-red-600 border border-red-200 rounded hover:bg-red-50"},"âœ•"))))}function Be(){const e=k([]),r=k(""),s=k("all"),f=k(0),p=k(0),u=k(null),n=()=>{f.value=e.value.reduce((c,x)=>c+(x.done.value?0:1),0),p.value++},i=()=>{const c=r.value.trim();if(!c)return;const x={id:Date.now(),text:k(c),done:k(!1)};e.value=[...e.value,x],r.value="",n()},o=c=>{e.value=e.value.filter(x=>x.id!==c.id),n()},C=c=>{c.done.value=!c.done.value,n()},A=()=>{e.value=e.value.filter(c=>!c.done.value),n()},y=c=>{u.value=c.id},T=(c,x)=>{const U=x.trim();U?c.text.value=U:o(c),u.value=null,n()},F=()=>{u.value=null},W=S([e,s,p],([c,x])=>{const U=c;return x==="active"?U.filter(_=>!_.done.value):x==="completed"?U.filter(_=>_.done.value):U}),V=S([e,p],([c])=>c.length>0&&c.every(x=>x.done.value)),B=()=>{const c=!V.value;for(const x of e.value)x.done.value=c;n()},D="todos",J=()=>{const c=e.value.map(x=>({id:x.id,text:x.text.value,done:x.done.value}));try{localStorage.setItem(D,JSON.stringify(c))}catch{}};return Re(()=>{try{const c=localStorage.getItem(D);if(c){const x=JSON.parse(c);e.value=x.map(U=>({id:U.id,text:k(U.text),done:k(U.done)})),n()}}catch{}S([e,p],J)}),a("div",{class:"max-w-xl mx-auto mt-8 p-4 border border-gray-200 rounded-lg"},a("h1",{class:"text-xl font-semibold mb-3"},"Todos"),a("div",{class:"flex gap-2"},a("input",{type:"text",placeholder:"What needs to be done?",value:r,onInput:c=>r.value=c.target.value,onKeyDown:c=>{c.key==="Enter"&&i()},class:"flex-1 px-3 py-2 border rounded outline-none focus:ring-2 focus:ring-blue-500"}),a("button",{onClick:i,class:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"Add")),a("div",{class:"mt-3 flex items-center gap-3"},a("button",{onClick:B,class:"px-2 py-1 border rounded hover:bg-gray-100"},"Toggle All"),a("span",{class:"text-sm text-gray-600"},"Items left: ",f)),a("ul",{class:"mt-3 divide-y divide-gray-100"},a(G,{each:W,key:c=>c.id,render:c=>a(je,{todo:c,editing:S(u,x=>x===c.id),onToggle:()=>C(c),onDelete:()=>o(c),onStartEdit:()=>y(c),onSave:x=>T(c,x),onCancel:F})})),a("div",{class:"mt-3 flex gap-2 items-center"},a("button",{onClick:()=>s.value="all",class:S(s,c=>`px-2 py-1 border rounded ${c==="all"?"font-semibold":"font-normal"}`)},"All"),a("button",{onClick:()=>s.value="active",class:S(s,c=>`px-2 py-1 border rounded ${c==="active"?"font-semibold":"font-normal"}`)},"Active"),a("button",{onClick:()=>s.value="completed",class:S(s,c=>`px-2 py-1 border rounded ${c==="completed"?"font-semibold":"font-normal"}`)},"Completed"),a("button",{onClick:A,class:"ml-auto px-2 py-1 border rounded hover:bg-gray-100"},"Clear Completed")),(()=>{const c=k(1e3),x=k(100),U=k(5),_=k(200),P=k(!1),z=k("");let j=null,L=null;const R=async()=>{await new Promise(t=>queueMicrotask(t)),await new Promise(t=>requestAnimationFrame(()=>t()))},b=t=>{const d=t.length,m=t.reduce((g,w)=>g+w,0)/d,v=t.reduce((g,w)=>g+(w-m)*(w-m),0)/d,I=Math.sqrt(v),O=Math.min(...t),E=Math.max(...t);return{mean:m,stddev:I,min:O,max:E}},M=(t,d,m)=>{const v=`${t}: mean=${d.mean.toFixed(2)}, stddev=${d.stddev.toFixed(2)}, min=${d.min.toFixed(2)}, max=${d.max.toFixed(2)}`;return m!=null?`${v}, ops/sec=${m.toFixed(0)}`:v},Q=(t,d)=>{const m=[];for(let v=0;v<t;v++)m.push(Math.floor(Math.random()*d));return m},ce=async(t,d)=>{if(!j)return{create:0,update:0};j.innerHTML="";const m=new Array(t);for(let l=0;l<t;l++)m[l]=k(`Item ${l}`);const v=k(m);j.appendChild(a(G,{each:v,key:(l,h)=>h,render:l=>a("li",{class:"py-0.5 text-gray-800"},l)}));const I=performance.now();v.value=m,await R();const O=performance.now(),E=Q(d,t);for(const l of E)m[l].value=`Updated ${l}`;const g=performance.now();await R();const w=performance.now();return{create:O-I,update:w-g}},Ie=async(t,d)=>{if(!j)return{create:0,update:0};j.innerHTML="";const m=new Array(t);for(let l=0;l<t;l++)m[l]=k(!1);const v=k(m);j.appendChild(a(G,{each:v,key:(l,h)=>h,render:(l,h)=>a("li",{class:"py-0.5"},a("span",{class:S(l,N=>N?"text-blue-600":"text-gray-800")},"Item ",h))}));const I=performance.now();v.value=m,await R();const O=performance.now(),E=Q(d,t),g=performance.now();for(const l of E)m[l].value=!m[l].value;await R();const w=performance.now();return{create:O-I,update:w-g}},ke=async(t,d)=>{if(!j)return{create:0,mutate:0};j.innerHTML="";const m=new Array(t);for(let h=0;h<t;h++)m[h]={id:h,text:k(`Item ${h}`)};const v=k(m);j.appendChild(a(G,{each:v,key:h=>h.id,render:h=>a("li",{class:"py-0.5 text-gray-800"},h.text)}));const I=performance.now();v.value=m,await R();const O=performance.now(),E=performance.now(),g=new Array(d),w=t;for(let h=0;h<d;h++)g[h]={id:w+h,text:k(`Ins ${h}`)};v.value=[...m,...g].slice(d),await R();const l=performance.now();return{create:O-I,mutate:l-E}},Ae=async t=>{if(!j)return{create:0,reorder:0};j.innerHTML="";const d=new Array(t);for(let g=0;g<t;g++)d[g]={id:g,text:k(`Item ${g}`)};const m=k(d);j.appendChild(a(G,{each:m,key:g=>g.id,render:g=>a("li",{class:"py-0.5 text-gray-800"},g.text)}));const v=performance.now();m.value=d,await R();const I=performance.now(),O=performance.now();m.value=[...d].reverse(),await R();const E=performance.now();return{create:I-v,reorder:E-O}},le=async(t,d)=>{if(!L)return{create:0,update:0};L.innerHTML="";const m=performance.now(),v=document.createDocumentFragment(),I=new Array(t);for(let l=0;l<t;l++){const h=document.createElement("li");h.className="py-0.5 text-gray-800",h.textContent=`Item ${l}`,I[l]=h,v.appendChild(h)}L.replaceChildren(v),await R();const O=performance.now(),E=Q(d,t),g=performance.now();for(const l of E)I[l].textContent=`Updated ${l}`;await R();const w=performance.now();return{create:O-m,update:w-g}},Ee=async(t,d)=>{if(!L)return{create:0,update:0};L.innerHTML="";const m=performance.now(),v=document.createDocumentFragment(),I=new Array(t);for(let l=0;l<t;l++){const h=document.createElement("li"),N=document.createElement("span");N.className="text-gray-800",N.textContent=`Item ${l}`,h.className="py-0.5",h.appendChild(N),I[l]=N,v.appendChild(h)}L.replaceChildren(v),await R();const O=performance.now(),E=Q(d,t),g=performance.now();for(const l of E){const h=I[l];h.className=h.className.includes("text-blue-600")?"text-gray-800":"text-blue-600"}await R();const w=performance.now();return{create:O-m,update:w-g}},Oe=async(t,d)=>{if(!L)return{create:0,mutate:0};L.innerHTML="";const m=performance.now(),v=document.createDocumentFragment(),I=new Array(t);for(let N=0;N<t;N++){const $=document.createElement("li");$.className="py-0.5 text-gray-800",$.textContent=`Item ${N}`,I[N]=$,v.appendChild($)}L.replaceChildren(v),await R();const O=performance.now(),E=performance.now(),g=new Array(d);for(let N=0;N<d;N++){const $=document.createElement("li");$.className="py-0.5 text-gray-800",$.textContent=`Ins ${N}`,g[N]=$}const w=[...I,...g].slice(d),l=document.createDocumentFragment();for(const N of w)l.appendChild(N);L.replaceChildren(l),await R();const h=performance.now();return{create:O-m,mutate:h-E}},Fe=async t=>{if(!L)return{create:0,reorder:0};L.innerHTML="";const d=performance.now(),m=document.createDocumentFragment(),v=new Array(t);for(let w=0;w<t;w++){const l=document.createElement("li");l.className="py-0.5 text-gray-800",l.textContent=`Item ${w}`,v[w]=l,m.appendChild(l)}L.replaceChildren(m),await R();const I=performance.now(),O=performance.now(),E=document.createDocumentFragment();for(let w=v.length-1;w>=0;w--)E.appendChild(v[w]);L.replaceChildren(E),await R();const g=performance.now();return{create:I-d,reorder:g-O}},Ne=async()=>{if(P.value)return;P.value=!0,z.value="Running benchmark...";const t=c.value,d=x.value,m=U.value,v=[],I=[],O=[],E=[];for(let $=0;$<m;$++){const q=await ce(t,d);v.push(q.create),I.push(q.update);const K=await le(t,d);O.push(K.create),E.push(K.update)}const g=b(v),w=b(I),l=b(O),h=b(E),N=[M("Framework Create ms",g,t/(g.mean/1e3)),M("Framework Update ms",w,d/(w.mean/1e3)),M("Vanilla   Create ms",l,t/(l.mean/1e3)),M("Vanilla   Update ms",h,d/(h.mean/1e3))];z.value=N.join(`
`),P.value=!1},Me=async()=>{if(P.value)return;P.value=!0,z.value="Running full suite...";const t=c.value,d=x.value,m=U.value,v=_.value,I=[],O=[],E=[],g=[],w=[],l=[],h=[],N=[],$=[],q=[],K=[],X=[],ee=[],te=[],ne=[],ie=[];for(let ue=0;ue<m;ue++){const de=await ce(t,d);I.push(de.create),O.push(de.update);const pe=await le(t,d);$.push(pe.create),q.push(pe.update);const fe=await Ie(t,d);E.push(fe.create),g.push(fe.update);const me=await Ee(t,d);K.push(me.create),X.push(me.update);const he=await ke(t,v);w.push(he.create),l.push(he.mutate);const ve=await Oe(t,v);ee.push(ve.create),te.push(ve.mutate);const ye=await Ae(t);h.push(ye.create),N.push(ye.reorder);const ge=await Fe(t);ne.push(ge.create),ie.push(ge.reorder)}const Te=["== Text Update ==",M("Framework Create ms",b(I),t/(b(I).mean/1e3)),M("Framework Update ms",b(O),d/(b(O).mean/1e3)),M("Vanilla   Create ms",b($),t/(b($).mean/1e3)),M("Vanilla   Update ms",b(q),d/(b(q).mean/1e3)),`
== Class Toggle ==`,M("Framework Create ms",b(E),t/(b(E).mean/1e3)),M("Framework Update ms",b(g),d/(b(g).mean/1e3)),M("Vanilla   Create ms",b(K),t/(b(K).mean/1e3)),M("Vanilla   Update ms",b(X),d/(b(X).mean/1e3)),`
== Insert/Remove ==`,M("Framework Create ms",b(w),t/(b(w).mean/1e3)),M("Framework Mutate ms",b(l),v*2/(b(l).mean/1e3)),M("Vanilla   Create ms",b(ee),t/(b(ee).mean/1e3)),M("Vanilla   Mutate ms",b(te),v*2/(b(te).mean/1e3)),`
== Reorder (reverse) ==`,M("Framework Create ms",b(h),t/(b(h).mean/1e3)),M("Framework Reorder ms",b(N)),M("Vanilla   Create ms",b(ne),t/(b(ne).mean/1e3)),M("Vanilla   Reorder ms",b(ie))];z.value=Te.join(`
`),P.value=!1};return a("div",{class:"mt-8"},a("h2",{class:"text-lg font-semibold mb-2"},"Benchmark"),a("div",{class:"grid grid-cols-4 gap-2 mb-3"},a("label",{class:"flex items-center gap-2"},a("span",{class:"text-sm text-gray-600"},"Items (N)"),a("input",{type:"number",value:c,onInput:t=>c.value=parseInt(t.target.value||0),class:"w-24 px-2 py-1 border rounded"})),a("label",{class:"flex items-center gap-2"},a("span",{class:"text-sm text-gray-600"},"Updates (M)"),a("input",{type:"number",value:x,onInput:t=>x.value=parseInt(t.target.value||0),class:"w-24 px-2 py-1 border rounded"})),a("label",{class:"flex items-center gap-2"},a("span",{class:"text-sm text-gray-600"},"Iterations (I)"),a("input",{type:"number",value:U,onInput:t=>U.value=parseInt(t.target.value||0),class:"w-24 px-2 py-1 border rounded"})),a("label",{class:"flex items-center gap-2"},a("span",{class:"text-sm text-gray-600"},"Inserts (K)"),a("input",{type:"number",value:_,onInput:t=>_.value=parseInt(t.target.value||0),class:"w-24 px-2 py-1 border rounded"}))),a("div",{class:"flex items-center gap-2 mb-3"},a("button",{onClick:Ne,class:"px-3 py-1.5 bg-indigo-600 text-white rounded disabled:opacity-60",disabled:P.value},"Run Benchmark"),a("span",{class:"text-sm text-gray-600"},"Runs framework vs vanilla: create and update timings.")),a("div",{class:"flex items-center gap-2 mb-4"},a("button",{onClick:Me,class:"px-3 py-1.5 bg-purple-600 text-white rounded disabled:opacity-60",disabled:P.value},"Run Full Suite"),a("span",{class:"text-sm text-gray-600"},"Adds class toggle, insert/remove, and reorder with ops/sec.")),a("div",{class:"grid grid-cols-2 gap-4"},a("div",null,a("h3",{class:"text-sm font-medium mb-1"},"Framework mount"),a("ul",{ref:t=>j=t,class:"min-h-10 border rounded p-2"})),a("div",null,a("h3",{class:"text-sm font-medium mb-1"},"Vanilla mount"),a("ul",{ref:t=>L=t,class:"min-h-10 border rounded p-2"}))),a("pre",{class:"mt-3 p-2 bg-gray-50 border rounded text-sm whitespace-pre-wrap"},z))})())}const xe=document.getElementById("app");xe&&xe.appendChild(a(Be,null));
