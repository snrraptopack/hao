(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=e(o);fetch(o.href,c)}})();const D=new Set;let V=!1;function xe(){for(;D.size>0;){const r=Array.from(D);D.clear();for(const t of r)try{t()}catch(e){console.error("Subscriber error:",e)}}}function we(r){D.add(r),V||(V=!0,queueMicrotask(()=>{V=!1,xe()}))}function R(r){let t=r;const e=[];let n=!1;const o=()=>{n=!1,e.forEach(a=>{try{a(t)}catch(i){console.error("Subscriber error:",i)}})},c=()=>{n||(n=!0,we(o))},s={get(a,i){return i==="value"?t:i==="subscribe"?h=>(e.push(h),()=>{const u=e.indexOf(h);u>-1&&e.splice(u,1)}):a[i]},set(a,i,h){return i==="value"?(t===h||(t=h,c()),!0):(a[i]=h,!0)}};return new Proxy({value:r},s)}let T=null;function F(r){T=r}function E(r,t){const e=Array.isArray(r),n=e?r:[r],o=()=>e?n.map(u=>u.value):n[0]?.value;let c=o(),s=t(c,void 0);const a=s!==void 0,i=[];if(!a){n.forEach(l=>{const f=l.subscribe(()=>{const m=o();J(m,c)||(t(m,c),c=m)});i.push(f)});const u=()=>i.forEach(l=>l());return T&&T.add(u),u}const h=R(s);return n.forEach(u=>{const l=u.subscribe(()=>{const f=o();if(!J(f,c)){const m=t(f,c);m!==void 0&&(J(m,s)||(s=m,h.value=m)),c=f}});i.push(l)}),h.__cleanup=()=>{i.forEach(u=>u())},T&&T.add(h.__cleanup),h}function J(r,t){if(r===t)return!0;if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;for(let o=0;o<r.length;o++)if(r[o]!==t[o])return!1;return!0}if(typeof r=="object"&&r!==null&&(typeof t=="object"&&t!==null)){const o=typeof r.nodeType=="number",c=typeof t.nodeType=="number";if(o||c)return!1;const s=Object.getPrototypeOf(r),a=Object.getPrototypeOf(t),i=s===Object.prototype||s===null,h=a===Object.prototype||a===null;if(!i||!h)return!1;const u=Object.keys(r),l=Object.keys(t);if(u.length!==l.length)return!1;for(let f=0;f<u.length;f++){const m=u[f];if(r[m]!==t[m])return!1}return!0}return!1}function q(r){const t=document.createElement(r);return{element:t,withClass(e){return t.className=e,this},withText(e,n){if(e&&typeof e=="object"){const o=e,c=s=>n?n(s):String(s.value);this.element.textContent=c(o.value),o.subscribe(()=>{this.element.textContent=c(o.value)})}else this.element.textContent=String(e);return this},withId(e){return t.id=e,this},appendChild(...e){return e.forEach(n=>t.appendChild(n)),this},on(e,n){return t.addEventListener(e,n),this},build(){return this.element}}}let Y=null;function ue(r){if(!Y){console.warn("onMount called outside component context");return}Y.mountCallbacks.push(r)}function Q(r){Y=r}function $(r){r.isMounted||(r.isMounted=!0,r.mountCallbacks.forEach(t=>{try{const e=t();typeof e=="function"&&r.cleanups.add(e)}catch(e){console.error("Error in onMount callback:",e)}}),r.mountCallbacks=[])}function de(r){r.cleanups.forEach(t=>{try{t()}catch(e){console.error("Error in cleanup:",e)}}),r.cleanups.clear()}function he(){return{cleanups:new Set,mountCallbacks:[],isMounted:!1}}const Ce=["div","span","p","h1","h2","h3","h4","h5","h6","a","img","ul","ol","li","table","tr","td","th","form","label","select","option","textarea","header","footer","nav","main","section","article","aside","button","input"];class O{constructor(){this.children=[],this.cleanups=[]}applyEvents(t,e){e&&Object.keys(e).forEach(n=>{const o=e[n];o&&(t.addEventListener(n,o),this.cleanups.push(()=>{t.removeEventListener(n,o)}))})}applyClassName(t,e){if(e)if(typeof e=="string")t.className=e,t[z]=new Set(ee(e));else{const n=e.value;t.className=n,t[z]=new Set(ee(n));const o=e.subscribe(c=>{Se(t,c)});this.cleanups.push(o)}}applyAttribute(t,e,n){if(n!=null)if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.setAttribute(e,String(n));else{t.setAttribute(e,String(n.value));const o=n.subscribe(c=>{t.setAttribute(e,String(c))});this.cleanups.push(o)}}applyStyle(t,e){if(e){if(typeof e=="string"){t.setAttribute("style",e);return}if(e&&typeof e=="object"&&"value"in e&&typeof e.subscribe=="function"){const n=e,o=n.value;typeof o=="string"?t.setAttribute("style",o):this.setStyleObject(t,o);const c=n.subscribe(s=>{typeof s=="string"?t.setAttribute("style",s):this.setStyleObject(t,s)});this.cleanups.push(c);return}this.setStyleObject(t,e)}}setStyleObject(t,e){if(!(!e||typeof e!="object"))for(const n in e)try{const o=e[n];t.style[n]=o}catch{}}createElement(t,e,n){const o=q(t).build();try{typeof e.ref=="function"&&e.ref(o)}catch{}if(e.text!==void 0)if(typeof e.text=="string"||typeof e.text=="number")o.textContent=String(e.text);else{o.textContent=String(e.text.value);const s=e.text.subscribe(a=>{o.textContent=String(a)});this.cleanups.push(s)}e.id&&(o.id=e.id);const c=e.class||e.className;if(this.applyClassName(o,c),this.applyStyle(o,e.style),this.applyEvents(o,e.on),e.href&&this.applyAttribute(o,"href",e.href),e.src&&this.applyAttribute(o,"src",e.src),e.alt&&this.applyAttribute(o,"alt",e.alt),e.type&&this.applyAttribute(o,"type",e.type),e.placeholder&&this.applyAttribute(o,"placeholder",e.placeholder),e.value!==void 0)if(typeof e.value=="string"||typeof e.value=="number")o.value=String(e.value);else{o.value=String(e.value.value);const s=e.value.subscribe(a=>{o.value=String(a)});this.cleanups.push(s)}if(e.checked!==void 0)if(typeof e.checked=="boolean")o.checked=e.checked;else{o.checked=e.checked.value;const s=e.checked.subscribe(a=>{o.checked=a});this.cleanups.push(s)}if(e.disabled!==void 0)if(typeof e.disabled=="boolean")o.disabled=e.disabled;else{o.disabled=e.disabled.value;const s=e.disabled.subscribe(a=>{o.disabled=a});this.cleanups.push(s)}if(n){const s=new O;n(s);const a=s.build();Array.from(a.children).forEach(i=>{o.appendChild(i)}),this.cleanups.push(()=>s.destroy())}return this.children.push(o),this}Div(t={},e){return this.createElement("div",t,e)}Button(t){return this.createElement("button",t)}Text(t){const e=q("p").build();if(typeof t.value=="string"||typeof t.value=="number")e.textContent=String(t.value);else{const n=c=>t.formatter?t.formatter(c):String(c);e.textContent=n(t.value.value);const o=t.value.subscribe(c=>{e.textContent=n(c)});this.cleanups.push(o)}return this.applyEvents(e,t.on),this.applyClassName(e,t.className),this.children.push(e),this}Input(t){return this.createElement("input",t)}List(t){const e=q("div").build();this.applyClassName(e,t.className);const n=new Map,o=t.key||((i,h)=>h);function c(i){const h=i.length,u=new Array(h),l=[];let f,m;for(let x=0;x<h;x++){const A=i[x];if(A===-1){u[x]=-1;continue}const p=l.length>0?l[l.length-1]:-1;if(l.length===0||p!==-1&&i[p]<A){u[x]=p!==-1?p:-1,l.push(x);continue}for(f=0,m=l.length-1;f<m;){const C=(f+m)/2|0,v=l[C];i[v]<A?f=C+1:m=C}const w=l[f];A<i[w]&&(f>0?u[x]=l[f-1]:u[x]=-1,l[f]=x)}let N=l.length,g=l[N-1];const S=new Array(N);for(;N-- >0;)S[N]=g,g=u[g]??-1;return S}const s=()=>{const i=t.items.value||[],h=i.length;if(h===0){if(n.size>0){for(const p of n.values())p.element.remove(),p.builder.destroy();n.clear()}return}const u=new Array(h),l=new Set;let f=!1;for(let p=0;p<h;p++){const w=i[p];if(w===void 0)throw new Error(`Item at index ${p} is undefined`);const C=o(w,p);if(C===void 0)throw new Error(`Key at index ${p} is undefined`);l.has(C)&&!f&&(f=!0,console.warn("[auwla] List: duplicate keys detected; subsequent items overwrite earlier entries")),l.add(C),u[p]=C}const m=new Set(u),N=[];for(const p of n.keys())m.has(p)||N.push(p);if(N.length>0)for(const p of N){const w=n.get(p);w&&(w.element.remove(),w.builder.destroy(),n.delete(p))}const g=N.length>0;let S=!1,x=!1;for(let p=0;p<h;p++){const w=u[p],C=i[p];if(C===void 0)throw new Error(`Item at index ${p} is undefined`);if(w===void 0)throw new Error(`Key at index ${p} is undefined`);const v=n.get(w);v?v.item!==C&&(x=!0):S=!0}if(!g&&!S&&!x){const p=document.createDocumentFragment();for(const w of u){if(w===void 0)throw new Error("Key is undefined in reorder path");const C=n.get(w);C&&p.appendChild(C.element)}e.replaceChildren(p);return}const A=new Map;for(let p=0;p<h;p++){const w=i[p];if(w===void 0)throw new Error(`Item at index ${p} is undefined`);const C=u[p];if(C===void 0)throw new Error(`Key at index ${p} is undefined`);let v=n.get(C);if(v){if(v.item!==w){v.element.remove(),v.builder.destroy();const k=new O;t.render(w,p,k);const b=k.build();v={element:b.children[0]||b,builder:k,item:w}}}else{const k=new O;t.render(w,p,k);const b=k.build();v={element:b.children[0]||b,builder:k,item:w}}A.set(C,v)}if(n.size===0){const p=document.createDocumentFragment();for(let w=0;w<u.length;w++){const C=u[w],v=A.get(C);p.appendChild(v.element)}e.replaceChildren(p)}else{const p=Array.from(n.keys()),w=new Map;for(let b=0;b<p.length;b++){const P=p[b];w.set(P,b)}const C=new Array(u.length);for(let b=0;b<u.length;b++){const P=u[b],M=w.get(P);C[b]=M===void 0?-1:M}const v=c(C),k=new Set(v);for(let b=u.length-1;b>=0;b--){const P=u[b],H=A.get(P).element,G=b+1<u.length?A.get(u[b+1]).element:null;(C[b]===-1||!k.has(b))&&e.insertBefore(H,G)}}n.clear();for(const[p,w]of A.entries())n.set(p,w)};s();const a=t.items.subscribe(()=>s());return this.cleanups.push(a),this.children.push(e),this}When(t,e){const n=q("div").build();let o=null,c=null;const s=()=>{n.innerHTML="",c&&c.destroy();const i=new O;c=i;let h=!1;t.value&&e?(e(i),h=!0):!t.value&&o&&(o(i),h=!0);const u=i.build();Array.from(u.children).forEach(l=>{n.appendChild(l)}),n.style.display=h?"":"none"};s();const a=t.subscribe(()=>s());return this.cleanups.push(a),this.children.push(n),{Else:i=>(o=i,s(),this)}}append(t){return this.children.push(t),this}destroy(){this.cleanups.forEach(t=>t()),this.cleanups=[]}build(){const t=document.createElement("div");return this.children.forEach(e=>t.appendChild(e)),t}}Ce.forEach(r=>{const t=r.charAt(0).toUpperCase()+r.slice(1);O.prototype[t]||(O.prototype[t]=function(e={},n){return this.createElement(r,e,n)})});function Ee(r){const t=new O,e=he();Q(e),F(e.cleanups),r(t),Q(null),F(null);const n=t.build();if(n.__context=e,n.__cleanup=()=>{de(e),t.destroy()},typeof MutationObserver<"u"){const o=new MutationObserver(s=>{s.forEach(a=>{a.removedNodes.forEach(i=>{(i===n||i.contains(n))&&(n.__cleanup?.(),o.disconnect())})})}),c=()=>{n.parentElement&&o.observe(n.parentElement,{childList:!0,subtree:!0})};n.parentElement?c():requestAnimationFrame(c)}if(n.isConnected)$(e);else if(requestAnimationFrame(()=>{n.isConnected&&$(e)}),typeof MutationObserver<"u"){const o=new MutationObserver(()=>{n.isConnected&&($(e),o.disconnect())});document.body&&o.observe(document.body,{childList:!0,subtree:!0})}return n}const z=Symbol("auwla_dsl_class_tokens");function ee(r){const t=String(r??"").trim();return t?t.split(/\s+/).filter(Boolean):[]}function Se(r,t){const e=r[z]||new Set,n=ee(t),o=new Set(n);e.forEach(c=>{o.has(c)||r.classList.remove(c)}),n.forEach(c=>{e.has(c)||r.classList.add(c)}),r[z]=o}function Ae(r){}class pe{constructor(t=[],e){this.routes=[],this.currentMatch=null,this.routeCleanup=null,this.state={},this.routes=t,this.container=e||document.body,this.currentPath=R(window.location.pathname),this.currentParams=R({}),this.currentQuery=R({}),window.addEventListener("popstate",()=>{this.currentPath.value=window.location.pathname}),E(this.currentPath,n=>{this.render(n,this.parseQuery())})}clearCache(){this.state={},console.log("ðŸ—‘ï¸ Router cache cleared")}clearCacheKey(t){delete this.state[t],console.log(`cache for: ${t}`)}add(t,e,n){return this.routes.push({path:t,component:e,name:n?.name,guard:n?.guard,layout:n?.layout,routed:n?.routed}),this}push(t){t!==this.currentPath.value&&(window.history.pushState({},"",t),this.currentPath.value=this.getPathWithoutQuery(t))}replace(t){window.history.replaceState({},"",t),this.currentPath.value=this.getPathWithoutQuery(t)}back(){window.history.back()}forward(){window.history.forward()}pushNamed(t,e){const n=this.routes.find(c=>c.name===t);if(!n){console.error(`Route with name "${t}" not found`);return}let o=typeof n.path=="string"?n.path:n.path.source;e&&Object.entries(e).forEach(([c,s])=>{o=o.replace(`:${c}`,s)}),this.push(o)}isActive(t){return this.currentPath.value===t}getPathWithoutQuery(t){return t.split("?")[0]||"/"}parseQuery(t){const e=t||window.location.search,n={};return e&&new URLSearchParams(e).forEach((c,s)=>{n[s]=c}),n}matchRoute(t){console.log("Matching path:",t,"against routes:",this.routes.map(e=>e.path));for(const e of this.routes)if(typeof e.path=="string"){const n=t.toLowerCase(),c=e.path.toString().toLowerCase().replace(/:\w+/g,i=>`(?<${i.slice(1)}>[^/]+)`),s=new RegExp(`^${c}$`),a=n.match(s);if(console.log(`Testing ${t} against ${e.path} (regex: ${s}):`,a),a)return{route:e,params:a.groups||{},query:this.parseQuery(),path:t}}else if(t.match(e.path))return{route:e,params:{},query:this.parseQuery(),path:t};return null}async render(t,e){const n=this.matchRoute(t);if(!n){console.error(`No route found for ${t}`),this.container.innerHTML=`
        <div class="flex items-center justify-center min-h-screen">
          <div class="text-center">
            <h1 class="text-6xl font-bold text-gray-300 mb-4">404</h1>
            <p class="text-xl text-gray-500">Page not found</p>
            <button 
              class="mt-6 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"
              onclick="window.history.back()"
            >
              Go Back
            </button>
          </div>
        </div>
      `;return}if(n.route.guard&&!await n.route.guard(n,this.currentMatch)){console.warn(`Route guard blocked navigation to ${t}`),this.currentMatch?this.replace(this.currentMatch.path):this.replace("/");return}if(this.routeCleanup){try{this.routeCleanup()}catch(a){console.error("Error in routed cleanup:",a)}this.routeCleanup=null}if(n.route.routed)try{const a=n.route.routed(this.state,n.params,this.currentMatch);typeof a=="function"&&(this.routeCleanup=a)}catch(a){console.error("Error in routed lifecycle:",a)}this.currentMatch=n,this.currentParams.value=n.params,this.currentQuery.value=n.query;const o=this.container.firstChild;o?.__cleanup&&o.__cleanup(),this.container.innerHTML="",this.state,n.params,n.query,this.currentMatch,n.path;const c=n.route.component(n.params,n.query),s=n.route.layout?n.route.layout(c,n.params,n.query):c;this.container.appendChild(s)}start(){this.render(this.currentPath.value,this.parseQuery())}getCurrentRoute(){return this.currentMatch}}let te=null;function fe(r){te=r}function I(){if(!te)throw new Error("Router not initialized. Call setRouter() first.");return te}function L(r){return Ee(t=>{const e=i=>i.split("?")[0]||i,n=()=>{let i=r.to;if(r.params)for(const[u,l]of Object.entries(r.params))i=i.replace(`:${u}`,encodeURIComponent(String(l)));const h=r.query?new URLSearchParams(Object.entries(r.query).map(([u,l])=>[u,String(l)])).toString():"";return h?`${i}?${h}`:i};let o=null,c=null,s=r.className||"";const a=n();try{if(o=I(),c=E(o.currentPath,i=>e(i)===e(a)),r.activeClassName){const i=typeof s=="string"?s:s?.value||"";s=E(c,h=>h?`${i} ${r.activeClassName}`:i)}}catch{}t.A({href:a,text:r.text,className:s||"",on:{click:i=>{i.preventDefault();try{I().push(a)}catch(h){console.error("Router not available:",h)}}}})})}function me(){return I()}function re(){return I().currentParams}function se(){return I().currentQuery}const ie=Object.freeze(Object.defineProperty({__proto__:null,Link:L,Router:pe,getRouter:I,setRoutedContext:Ae,setRouter:fe,useParams:re,useQuery:se,useRouter:me},Symbol.toStringTag,{value:"Module"}));function K(r){return r&&typeof r=="object"&&"value"in r&&typeof r.subscribe=="function"}const ke=/^on([A-Z].*)$/;function Ne(r){const t=ke.exec(r);if(!t)return null;const e=t[1]??" ";return e.charAt(0).toLowerCase()+e.slice(1)}function Z(r,t){if(t){if(typeof t=="string")r.setAttribute("style",t);else if(typeof t=="object")for(const e in t)r.style[e]=t[e]}}const W=Symbol("auwla_jsx_class_tokens");function ne(r){const t=String(r??"").trim();return t?t.split(/\s+/).filter(Boolean):[]}function Pe(r,t){const e=r[W]||new Set,n=ne(t),o=new Set(n);e.forEach(c=>{o.has(c)||r.classList.remove(c)}),n.forEach(c=>{e.has(c)||r.classList.add(c)}),r[W]=o}function j(r,t,e){if(e==null||e===!1){r.removeAttribute(t);return}if(e===!0){r.setAttribute(t,"");return}if(t in r)try{r[t]=e;return}catch{}r.setAttribute(t,String(e))}function ye(r,t){const e=t.flat(1/0);for(const n of e){if(n==null||n===!1||n===!0)continue;const o=(c,s)=>{if(!(s==null||s===!1||s===!0))if(typeof s=="string"||typeof s=="number")c.parentNode?.insertBefore(document.createTextNode(String(s)),c);else if(s instanceof Node)c.parentNode?.insertBefore(s,c);else if(Array.isArray(s))for(const a of s.flat(1/0))o(c,a);else c.parentNode?.insertBefore(document.createTextNode(String(s)),c)};if(K(n)){const c=n.value;if(typeof c=="string"||typeof c=="number"){const s=document.createTextNode(String(c));r.appendChild(s),E(n,a=>{s.textContent=String(a??"")})}else{const s=document.createComment("ref-start"),a=document.createComment("ref-end");r.appendChild(s),r.appendChild(a);const i=h=>{let u=s.nextSibling;for(;u&&u!==a;){const l=u.nextSibling;u.remove(),u=l}o(a,h)};i(n.value),E(n,h=>i(h))}continue}typeof n=="string"||typeof n=="number"?r.appendChild(document.createTextNode(String(n))):n instanceof Node?r.appendChild(n):Array.isArray(n)&&ye(r,n)}}function X(r,t,...e){const n=t||{};if(typeof r=="function"){const a=he();Q(a),F(a.cleanups);const i=r({...n,children:e});if(Q(null),F(null),i.__context=a,i.__cleanup=()=>{de(a)},typeof MutationObserver<"u"){const h=new MutationObserver(l=>{l.forEach(f=>{f.removedNodes.forEach(m=>{(m===i||m.contains(i))&&(i.__cleanup?.(),h.disconnect())})})}),u=()=>{i.parentElement?h.observe(i.parentElement,{childList:!0,subtree:!0}):requestAnimationFrame(u)};if(u(),i.isConnected)$(a);else{const l=new MutationObserver(()=>{i.isConnected&&($(a),l.disconnect())});l.observe(document.body,{childList:!0,subtree:!0})}}else requestAnimationFrame(()=>{i.isConnected&&$(a)});return i}const s=q(r).element;for(const a in n){if(a==="children")continue;const i=n[a],h=Ne(a);if(h){s.addEventListener(h,i);continue}if(a==="class"||a==="className"){if(K(i)){const l=String(i.value??"");s.className=l,s[W]=new Set(ne(l)),E(i,f=>Pe(s,f))}else s.className=String(i??""),s[W]=new Set(ne(i));continue}if(a==="style"){K(i)?(Z(s,i.value),E(i,l=>Z(s,l))):Z(s,i);continue}if(a==="ref"&&typeof i=="function"){i(s);continue}if(["value","checked","disabled","placeholder","type","href","src","alt"].includes(a)){K(i)?(j(s,a,i.value),E(i,l=>j(s,a,l))):j(s,a,i);continue}K(i)?(j(s,a,i.value),E(i,l=>j(s,a,l))):j(s,a,i)}return ye(s,e),s}function d(r,t={},e){e!==void 0&&t&&t.key===void 0&&(t={...t,key:e});const n=t?.children;return n===void 0?X(r,t):Array.isArray(n)?X(r,t,...n):X(r,t,n)}const y=d;function Re(r){return r&&typeof r=="object"&&"value"in r&&typeof r.subscribe=="function"}function B(r){const t=r.children??[],e=[],n=[];let o=null;for(let u=0;u<t.length;u++){const l=t[u];Re(l)?t[u+1]&&typeof t[u+1]=="function"&&(e.push(l),n.push(t[u+1]),u++):typeof l=="function"&&u===t.length-1?o=l:u===t.length-1&&(o=()=>l)}const c=document.createComment("when-start"),s=document.createComment("when-end");let a=[];const i=()=>{a.forEach(l=>l.remove()),a=[];let u=!1;for(let l=0;l<e.length;l++)if(e[l]?.value){const f=n[l];if(f){const m=f();a.push(m),s.parentNode.insertBefore(m,s),u=!0;break}}if(!u&&o){const l=o();a.push(l),s.parentNode.insertBefore(l,s)}},h=document.createElement("span");return h.style.display="contents",h.appendChild(c),h.appendChild(s),i(),E(e,i),h}function oe(r){const{each:t,key:e,render:n}=r;let o=n;if(!o){const f=r.children;Array.isArray(f)&&typeof f[0]=="function"?o=f[0]:typeof f=="function"&&(o=f)}if(!o)throw new Error('For component requires either "render" or "children" prop');const c=document.createComment("for-start"),s=document.createComment("for-end"),a=new Map,i=e||((f,m)=>m);function h(f){const m=f.length,N=new Array(m),g=[];let S,x;for(let C=0;C<m;C++){const v=f[C];if(v===-1){N[C]=-1;continue}const k=g.length>0?g[g.length-1]:-1;if(g.length===0||k!==-1&&f[k]<v){N[C]=k!==-1?k:-1,g.push(C);continue}for(S=0,x=g.length-1;S<x;){const P=(S+x)/2|0,M=g[P];f[M]<v?S=P+1:x=P}const b=g[S];v<f[b]&&(S>0?N[C]=g[S-1]:N[C]=-1,g[S]=C)}let A=g.length,p=g[A-1];const w=new Array(A);for(;A-- >0;)w[A]=p,p=N[p]??-1;return w}const u=()=>{const f=t.value||[],m=new Map,N=[];for(let g=0;g<f.length;g++){const S=f[g];if(S===void 0)continue;const x=i(S,g),A=a.get(x);if(A)m.has(x)&&console.warn("[auwla] For: duplicate key detected:",String(x)),m.set(x,A),N.push(A.node);else{const p=o(S,g);m.has(x)&&console.warn("[auwla] For: duplicate key detected:",String(x)),m.set(x,{node:p,item:S}),N.push(p)}}for(const[g,S]of a.entries())m.has(g)||S.node.remove();if(a.size===0){const g=document.createDocumentFragment();for(const S of N)g.appendChild(S);s.parentNode.insertBefore(g,s)}else{const g=Array.from(a.keys()),S=new Map;for(let v=0;v<g.length;v++){const k=g[v];S.set(k,v)}const x=Array.from(m.keys()),A=new Array(x.length);let p=!1;for(let v=0;v<x.length;v++){const k=x[v],b=S.get(k);b===void 0?(A[v]=-1,p=!0):A[v]=b}const w=a.size===m.size;if(!p&&w){const v=document.createDocumentFragment();for(let b=0;b<x.length;b++){const P=x[b],M=m.get(P);v.appendChild(M.node)}const k=document.createRange();k.setStartAfter(c),k.setEndBefore(s),k.deleteContents(),s.parentNode.insertBefore(v,s)}else{const v=h(A),k=new Set(v);for(let b=x.length-1;b>=0;b--){const P=x[b],H=m.get(P).node,G=b+1<x.length?m.get(x[b+1]).node:s;(A[b]===-1||!k.has(b))&&s.parentNode.insertBefore(H,G)}}}a.clear();for(const[g,S]of m.entries())a.set(g,S)},l=document.createElement("span");return l.style.display="contents",l.appendChild(c),l.appendChild(s),u(),E(t,u),l}function Le(r,t){const e=r.endsWith("/")?r.slice(0,-1):r,n=t.startsWith("/")?t:`/${t}`;return`${e}${n}`||"/"}function be(...r){const t=[];for(const e of r)t.push(...e);return t}function ve(r,t,e){return e.map(n=>({...n,path:Le(r,n.path),guard:t?.guard??n.guard,layout:t?.layout??n.layout}))}const _e="modulepreload",Me=function(r){return"/"+r},ce={},ae=function(t,e,n){let o=Promise.resolve();if(e&&e.length>0){let h=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};var s=h;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=a?.nonce||a?.getAttribute("nonce");o=h(e.map(u=>{if(u=Me(u),u in ce)return;ce[u]=!0;const l=u.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":_e,l||(m.as="script"),m.crossOrigin="",m.href=u,i&&m.setAttribute("nonce",i),document.head.appendChild(m),l)return new Promise((N,g)=>{m.addEventListener("load",N),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function c(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return o.then(a=>{for(const i of a||[])i.status==="rejected"&&c(i.reason);return t().catch(c)})};function U(r,t){const e=R(null),n=R(!1),o=R(null),c=async()=>{if(t?.cacheKey)try{const{getRouter:s}=await ae(async()=>{const{getRouter:i}=await Promise.resolve().then(()=>ie);return{getRouter:i}},void 0),a=s();if(a.state[t.cacheKey]){console.log(`âœ… Using cached data for: ${t.cacheKey}`),e.value=a.state[t.cacheKey];return}}catch{}n.value=!0,o.value=null;try{const s=typeof r=="function"?r():r,a=await window.fetch(s);if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const i=await a.json();if(e.value=i,t?.cacheKey)try{const{getRouter:h}=await ae(async()=>{const{getRouter:l}=await Promise.resolve().then(()=>ie);return{getRouter:l}},void 0),u=h();u.state[t.cacheKey]=i,console.log(`ðŸ’¾ Cached data for: ${t.cacheKey}`)}catch{}}catch(s){o.value=s.message,console.error("Fetch error:",s)}finally{n.value=!1}};return ue(()=>{c()}),{data:e,loading:n,error:o,refetch:c}}const _=R(!1);function Oe(){_.value=!_.value}function je(){_.value=!0}function $e(){_.value=!1}function ge(r){const t=E(_,()=>_.value?"Logout":"Login"),e=E(_,()=>_.value?"Authenticated":"Guest");return y("div",{class:"min-h-screen bg-gray-50 text-gray-900",children:[d("header",{class:"bg-white border-b",children:y("div",{class:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between",children:[y("div",{class:"flex items-center gap-4",children:[d("h1",{class:"font-bold text-lg",children:"Auwla Modular App"}),d("span",{class:"text-xs px-2 py-1 rounded bg-gray-100 border",children:e})]}),y("nav",{class:"flex gap-2",children:[d(L,{to:"/app/home",text:"Home",className:"px-3 py-2 rounded border",activeClassName:"bg-indigo-600 text-white"}),d(L,{to:"/app/users",text:"Users",className:"px-3 py-2 rounded border",activeClassName:"bg-indigo-600 text-white"}),d(L,{to:"/app/posts",text:"Posts",className:"px-3 py-2 rounded border",activeClassName:"bg-indigo-600 text-white"}),d(L,{to:"/app/search",text:"Search",className:"px-3 py-2 rounded border",activeClassName:"bg-indigo-600 text-white"}),d(L,{to:"/admin/dashboard",text:"Admin",className:"px-3 py-2 rounded border",activeClassName:"bg-indigo-600 text-white"})]}),d("button",{class:"px-3 py-2 rounded border",onClick:()=>Oe(),children:t})]})}),d("main",{class:"max-w-5xl mx-auto px-4 py-6",children:r})]})}function Ie(){return y("div",{class:"space-y-4",children:[d("h2",{class:"text-2xl font-bold",children:"Welcome"}),d("p",{class:"text-gray-700",children:"This app demonstrates route splitting, composition, layouts, guards, and data fetching."}),y("ul",{class:"list-disc pl-6 text-gray-700 space-y-1",children:[y("li",{children:["Modular routes under ",d("code",{children:"/app/*"})]}),d("li",{children:"Admin area protected by a guard"}),d("li",{children:"Users and Posts fetched from JSONPlaceholder"}),d("li",{children:"Search page reacts to query parameters"}),d("li",{children:"Layout wrapping with shared navigation"})]})]})}function Te(){return d("div",{class:"min-h-screen flex items-center justify-center bg-gray-50",children:y("div",{class:"p-8 bg-white rounded-xl shadow-sm space-y-4 text-center",children:[d("h1",{class:"text-3xl font-bold",children:"Auwla Demo"}),d("p",{class:"text-gray-600",children:"Start the modular app experience."}),d("div",{class:"flex justify-center",children:d(L,{to:"/app/home",text:"Enter App",className:"px-4 py-2 rounded border",activeClassName:"bg-indigo-600 text-white"})})]})})}function qe(r){let t=0;for(let e=0;e<r;e++)t+=Math.sin(e)*Math.sqrt(e%1024+1);return t}function Ke(){const r=R(0),t=R(1e5),e=R(0),n=R(0),o=R(0);ue(()=>{const s=setInterval(()=>{o.value++},50);return()=>clearInterval(s)}),E(t,s=>{const a=performance.now(),i=qe(s),h=performance.now();e.value=i,n.value=Math.round(h-a)});const c=E(r,s=>s*2);return y("div",{class:"space-y-6",children:[d("h2",{class:"text-2xl font-bold",children:"Performance Demo"}),y("div",{class:"grid md:grid-cols-2 gap-6",children:[y("div",{class:"space-y-3 p-4 border rounded",children:[d("h3",{class:"font-semibold",children:"Counter (fast updates)"}),y("div",{class:"text-lg",children:["Clicks: ",r]}),y("div",{class:"text-sm text-gray-600",children:["Doubled (derived): ",c]}),y("div",{class:"flex gap-2 pt-2",children:[d("button",{class:"px-3 py-1 bg-blue-600 text-white rounded",onClick:()=>r.value+=1,children:"+1"}),d("button",{class:"px-3 py-1 bg-blue-600 text-white rounded",onClick:()=>r.value+=100,children:"+100"}),d("button",{class:"px-3 py-1 border rounded",onClick:()=>r.value=0,children:"Reset"})]}),y("div",{class:"text-xs text-gray-500",children:["Tick: ",o]})]}),y("div",{class:"space-y-3 p-4 border rounded",children:[d("h3",{class:"font-semibold",children:"Expensive compute (isolated)"}),d("label",{class:"block text-sm text-gray-700",children:"Iterations"}),d("input",{type:"number",value:t,onInput:s=>t.value=Number(s.target.value)||0,class:"w-full px-2 py-1 border rounded",min:"10000",step:"5000"}),y("div",{class:"text-sm text-gray-700",children:["Result: ",e]}),y("div",{class:"text-sm text-gray-700",children:["Last duration: ",n," ms"]}),d("p",{class:"text-xs text-gray-500",children:"Changing iterations triggers the heavy compute. Clicking the counter does not."})]})]}),d("p",{class:"text-gray-700 text-sm",children:"This shows fine-grained updates: only the affected text nodes re-render. No need for memo hooks; computations are driven by the specific refs they depend on."})]})}function Be(){return U("https://jsonplaceholder.typicode.com/users",{cacheKey:"users"})}function Ue(r){return U(()=>`https://jsonplaceholder.typicode.com/users/${r.value}`,{cacheKey:`user_${r.value}`})}function De(){const{data:r,loading:t,error:e,refetch:n}=Be(),o=E(r,s=>Array.isArray(s)?s:[]),c=E(e,s=>!!s);return y("div",{class:"space-y-4",children:[y("div",{class:"flex items-center justify-between",children:[d("h2",{class:"text-xl font-semibold",children:"Users"}),d("button",{class:"px-3 py-2 rounded border",onClick:()=>n(),children:"Refetch"})]}),y(B,{children:[t,()=>d("div",{class:"text-gray-500",children:"Loading usersâ€¦"}),c,()=>y("div",{class:"text-red-600",children:["Error: ",e.value]}),()=>d("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-3",children:d(oe,{each:o,render:s=>y("div",{class:"p-3 rounded border bg-white",children:[d("div",{class:"font-medium",children:s.name}),y("div",{class:"text-sm text-gray-600",children:["@",s.username," â€¢ ",s.email]}),d("div",{class:"mt-2",children:d(L,{to:"/app/users/:id",params:{id:s.id},text:"View",className:"px-2 py-1 rounded border",activeClassName:"bg-indigo-600 text-white"})})]})})})]})]})}const Fe=R(null);function Qe(){const r=re(),t=E(r,s=>s.id),{data:e,loading:n,error:o}=Ue(t),c=E(o,s=>!!s);return E(t,s=>{Fe.value=s}),y("div",{class:"space-y-4",children:[y("div",{class:"flex items-center gap-3",children:[d("h2",{class:"text-xl font-semibold",children:"User Detail"}),d(L,{to:"/app/users",text:"Back",className:"px-2 py-1 rounded border",activeClassName:"bg-indigo-600 text-white"})]}),y(B,{children:[n,()=>d("div",{class:"text-gray-500",children:"Loading userâ€¦"}),c,()=>y("div",{class:"text-red-600",children:["Error: ",o.value]}),()=>y("div",{class:"p-3 rounded border bg-white",children:[d("div",{class:"font-medium",children:e.value?.name}),y("div",{class:"text-sm text-gray-600",children:["@",e.value?.username," â€¢ ",e.value?.email]}),d("div",{class:"mt-2 flex gap-2",children:d(L,{to:"/app/posts",query:{userId:t.value},text:"View Posts",className:"px-2 py-1 rounded border",activeClassName:"bg-indigo-600 text-white"})})]})]})]})}const ze=[{path:"/users",component:()=>d(De,{})},{path:"/users/:id",component:()=>d(Qe,{})}];function We(r){return U(()=>{const e=r?r.value:void 0;return e?`https://jsonplaceholder.typicode.com/posts?userId=${encodeURIComponent(String(e))}`:"https://jsonplaceholder.typicode.com/posts?_limit=20"})}function He(r){return U(()=>`https://jsonplaceholder.typicode.com/posts/${r.value}`,{cacheKey:`post_${r.value}`})}function Ge(){const r=se(),t=E(r,i=>i.userId),{data:e,loading:n,error:o,refetch:c}=We(t);E(r,()=>c());const s=E(e,i=>Array.isArray(i)?i:[]),a=E(o,i=>!!i);return y("div",{class:"space-y-4",children:[y("div",{class:"flex items-center justify-between",children:[d("h2",{class:"text-xl font-semibold",children:"Posts"}),d("button",{class:"px-3 py-2 rounded border",onClick:()=>c(),children:"Refetch"})]}),y(B,{children:[n,()=>d("div",{class:"text-gray-500",children:"Loading postsâ€¦"}),a,()=>y("div",{class:"text-red-600",children:["Error: ",o.value]}),()=>d("div",{class:"space-y-3",children:d(oe,{each:s,render:i=>y("div",{class:"p-3 rounded border bg-white",children:[d("div",{class:"font-medium",children:i.title}),y("div",{class:"text-sm text-gray-600",children:["by User #",i.userId]}),d("div",{class:"mt-2 flex gap-2",children:d(L,{to:"/app/users/:id",params:{id:i.userId},text:"User",className:"px-2 py-1 rounded border",activeClassName:"bg-indigo-600 text-white"})})]})})})]})]})}function Ve(){const r=re(),t=E(r,s=>s.id),{data:e,loading:n,error:o}=He(t),c=E(o,s=>!!s);return y("div",{class:"space-y-4",children:[d("h2",{class:"text-xl font-semibold",children:"Post Detail"}),y(B,{children:[n,()=>d("div",{class:"text-gray-500",children:"Loading postâ€¦"}),c,()=>y("div",{class:"text-red-600",children:["Error: ",o.value]}),()=>y("div",{class:"p-3 rounded border bg-white",children:[d("div",{class:"font-medium",children:e.value?.title}),y("div",{class:"text-sm text-gray-600",children:["User #",e.value?.userId]}),d("p",{class:"mt-2 text-gray-700",children:e.value?.body})]})]})]})}const Je=[{path:"/posts",component:()=>d(Ge,{})},{path:"/posts/:id",component:()=>d(Ve,{})}];function Ze(){const r=E(_,()=>_.value?"Authenticated":"Guest");return y("div",{class:"space-y-4",children:[d("h2",{class:"text-xl font-semibold",children:"Admin Dashboard"}),y("p",{class:"text-gray-700",children:["Status: ",r]}),y("div",{class:"flex gap-2",children:[d("button",{class:"px-3 py-2 rounded border",onClick:()=>je(),children:"Login"}),d("button",{class:"px-3 py-2 rounded border",onClick:()=>$e(),children:"Logout"})]}),d("p",{class:"text-gray-600",children:"Use the header toggle or these buttons to change auth state."})]})}const Xe=[{path:"/dashboard",component:()=>d(Ze,{})}],Ye=()=>_.value;function et(r,t){return E([r,t],([e,n])=>{if(!n)return e;const o=n.toLowerCase();return e.filter(c=>c.title.toLowerCase().includes(o)||c.body.toLowerCase().includes(o))})}function tt(r){return`/app/search?q=${encodeURIComponent(r)}`}function nt(){const r=me(),t=se(),e=E(t,l=>l.q||""),{data:n,loading:o,error:c,refetch:s}=U("https://jsonplaceholder.typicode.com/posts?_limit=50",{cacheKey:"posts_search_base"}),a=E(n,l=>Array.isArray(l)?l:[]),i=et(a,e),h=E(c,l=>!!l),u=l=>{r.replace(tt(l))};return y("div",{class:"space-y-4",children:[y("div",{class:"flex items-center justify-between gap-3",children:[d("h2",{class:"text-xl font-semibold",children:"Search Posts"}),d("input",{class:"px-3 py-2 rounded border w-64",placeholder:"Type to searchâ€¦",value:e,onInput:l=>u(l.target.value)})]}),y(B,{children:[o,()=>d("div",{class:"text-gray-500",children:"Loading postsâ€¦"}),h,()=>y("div",{class:"text-red-600",children:["Error: ",c.value]}),()=>d("div",{class:"space-y-3",children:d(oe,{each:i,render:l=>y("div",{class:"p-3 rounded border bg-white",children:[d("div",{class:"font-medium",children:l.title}),y("p",{class:"text-gray-700",children:[l.body.slice(0,120),"â€¦"]})]})})})]}),d("div",{children:d("button",{class:"px-3 py-2 rounded border",onClick:()=>s(),children:"Refetch Base"})})]})}const rt=[{path:"/",component:()=>d(Te,{})}],st=ve("/app",{layout:ge},be([{path:"/home",component:()=>d(Ie,{})}],ze,Je,[{path:"/search",component:()=>d(nt,{})},{path:"/perf",component:()=>d(Ke,{})}])),ot=ve("/admin",{guard:Ye,layout:ge},Xe),it=be(rt,st,ot),le=document.getElementById("app");if(le){const r=new pe(it,le);fe(r),r.start()}
